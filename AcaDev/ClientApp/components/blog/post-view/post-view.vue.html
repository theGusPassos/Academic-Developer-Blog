<template>
    <div class="content-width">
        <div v-if="loading" class="loading">
            <img src="../../../../wwwroot/loading-icon.gif" />
        </div>
        <div v-else-if="error" class="error">
            <span>{{ errorCode }}</span>
            <span>{{ errorMessage }}</span>
            <span><a href="">You can try searching the term {{ $route.params.title }}</a></span>
        </div>

        <post-component v-else v-bind:post="post" />

        <div class="comment-margin">
            <section class="leave-comment">
                <span><b>Leave a comment:</b></span>

                <input type="text" placeholder="name" />
                <textarea rows="2" />

                <div class="post-button">
                    <button>Post</button>
                </div>
            </section>

            <section class="comments">
                <span class="comment-count">
                    {{ post.comments.length }} comment
                    {{ post.comments.length > 1 ? 's' : '' }}
                </span>

                <div class="comment-display" v-for="comment in post.comments">
                    <span><b>{{ comment.author }}</b></span>
                    <span>{{ comment.date }}</span>
                    <span>{{ comment.content }}</span>
                </div>
            </section>
        </div>
    </div>
</template>

<script src="./post-view.ts"></script>
<style src="./post-view.css"></style>